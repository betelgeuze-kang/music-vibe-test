<!-- 
  [CODEPEN VERSION]
  Copy and paste this entire code into the HTML section of your Pen.
  Note: Local images are replaced by CSS gradients for this portable version.
-->
<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MY MUSIC VIBE TEST</title>

    <script src="https://cdn.tailwindcss.com"></script>

    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Pretendard:wght@300;400;600;800&display=swap');

        body {
            font-family: 'Pretendard', sans-serif;
            background-color: #111827;
            color: white;
            /* body에서 overflow: hidden을 제거하여 스크롤 제한을 해제 */
        }

        /* 커스텀 애니메이션 정의 */
        @keyframes spin-slow {
            from {
                transform: rotate(0deg);
            }

            to {
                transform: rotate(360deg);
            }
        }

        @keyframes music-bar {

            0%,
            100% {
                height: 0.2rem;
            }

            50% {
                height: 0.8rem;
            }
        }

        @keyframes fade-in {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slide-up {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes ripple {
            0% {
                transform: scale(0.8);
                opacity: 0.8;
                border-width: 4px;
            }

            100% {
                transform: scale(4.5);
                opacity: 0;
                border-width: 0px;
            }
        }

        @keyframes gradient-x {
            0% {
                background-position: 0% 50%;
            }

            50% {
                background-position: 100% 50%;
            }

            100% {
                background-position: 0% 50%;
            }
        }

        @keyframes bounce-slow {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-5%);
            }
        }

        @keyframes pulse-fast {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.7;
            }
        }

        @keyframes wave {
            0% {
                background-position: 0% 50%;
            }

            100% {
                background-position: 100% 50%;
            }
        }

        @keyframes float-slow {

            0%,
            100% {
                transform: translate(0, 0);
            }

            50% {
                transform: translate(3px, -3px);
            }
        }

        /* 유틸리티 클래스 */
        .animate-spin-slow {
            animation: spin-slow 4s linear infinite;
        }

        .animate-music-bar {
            animation: music-bar 1s ease-in-out infinite;
        }

        .animate-fade-in {
            animation: fade-in 0.8s ease-out forwards;
        }

        .animate-slide-up {
            animation: slide-up 0.8s ease-out forwards;
        }

        .animate-ripple {
            animation: ripple 1.6s cubic-bezier(0, 0.2, 0.8, 1) infinite;
        }

        .animate-gradient-x {
            animation: gradient-x 3s ease infinite;
            background-size: 200% auto;
        }

        .animate-bounce-slow {
            animation: bounce-slow 2s infinite ease-in-out;
        }

        .animate-pulse-fast {
            animation: pulse-fast 0.5s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }

        .animate-wave {
            animation: wave 5s linear infinite;
            background-size: 200% 200%;
        }

        .animate-float-slow {
            animation: float-slow 4s ease-in-out infinite;
        }

        .hide-scrollbar::-webkit-scrollbar {
            display: none;
        }

        .hide-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        .glass-panel {
            background: rgba(31, 41, 55, 0.6);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* 텍스트 줄바꿈 처리 */
        .break-keep {
            word-break: keep-all;
        }
    </style>
</head>

<body class="flex justify-center items-center min-h-screen p-0 sm:p-4">

    <div
        class="w-full max-w-[420px] h-[100dvh] sm:h-[800px] bg-[#09090b] sm:rounded-3xl shadow-2xl overflow-hidden relative border border-gray-800 flex flex-col ring-1 ring-white/10">

        <!-- K/DA Style Header -->
        <div
            class="w-full px-6 py-5 flex justify-between items-center z-50 absolute top-0 left-0 right-0 bg-gradient-to-b from-black/80 to-transparent pointer-events-none">
            <span
                class="text-[10px] font-black italic text-transparent bg-clip-text bg-gradient-to-r from-amber-200 to-amber-500 tracking-[0.2em] pointer-events-auto cursor-pointer hover:opacity-80 transition-opacity drop-shadow-glow"
                onclick="resetTest()">
                MY VIBE
            </span>
        </div>

        <!-- Global Ambient Background (K/DA Theme: Violet/Gold/Cyan) -->
        <div class="absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none z-0">
            <div
                class="absolute top-[-20%] left-[-20%] w-[80%] h-[60%] bg-[#4c1d95] rounded-full blur-[120px] opacity-20 animate-pulse-slow">
            </div>
            <div class="absolute bottom-[-10%] right-[-10%] w-[60%] h-[50%] bg-[#0891b2] rounded-full blur-[100px] opacity-10 animate-float-slow"
                style="animation-delay: 2s;"></div>
            <div class="absolute top-[40%] left-[20%] w-[30%] h-[30%] bg-[#d97706] rounded-full blur-[100px] opacity-10 animate-pulse-slow"
                style="animation-delay: 1s;"></div>
        </div>

        <div id="app-container" class="flex-1 relative z-10 pt-14 pb-0 overflow-hidden flex flex-col">
        </div>

    </div>

    <script>

const createQ = (id, text, type) => ({
    id,
    text,
    options: [
        { text: "매우 아니다", type: type.opposite, score: 2 },
        { text: "아니다", type: type.opposite, score: 1 },
        { text: "보통이다", type: type.main, score: 0 },
        { text: "그렇다", type: type.main, score: 1 },
        { text: "매우 그렇다", type: type.main, score: 2 }
    ]
});

// **[수정: 성격 유형 테스트 질문 - 40문항 5지선다 위주]**
const QUESTIONS = [
    // --- E vs I (에너지) ---
    createQ(1, "나는 새로운 사람들과 어울리는 것을 좋아하며 모임을 주도하는 편이다.", { main: 'E', opposite: 'I' }),
    createQ(2, "나는 생각이 생기면 혼자 곱씹기보다 말로 내뱉으며 정리하는 것이 편하다.", { main: 'E', opposite: 'I' }),
    createQ(3, "나는 주말에 집에만 있으면 무기력해지고 밖으로 나가야 에너지가 생긴다.", { main: 'E', opposite: 'I' }),
    createQ(4, "나는 처음 보는 사람에게도 먼저 말을 거는 데 큰 어려움이 없다.", { main: 'E', opposite: 'I' }),
    createQ(5, "나는 다수의 사람들과 함께 활동할 때 훨씬 더 활기를 느낀다.", { main: 'E', opposite: 'I' }),
    createQ(6, "나는 내 관심사를 주변 사람들에게 적극적으로 공유하고 알리고 싶어 한다.", { main: 'E', opposite: 'I' }),
    createQ(7, "나는 전화를 걸기보다 받거나, 걸기 전에 미리 리허설을 하지 않는 편이다.", { main: 'E', opposite: 'I' }),
    createQ(8, "나는 주변에서 '활발하다' 혹은 '에너지가 넘친다'는 소리를 자주 듣는다.", { main: 'E', opposite: 'I' }),
    createQ(9, "나는 관심의 중심에 서는 것이 크게 부담스럽지 않고 즐길 때가 있다.", { main: 'E', opposite: 'I' }),
    createQ(10, "나는 혼자 조용히 생각하는 것보다 친구들과 수다를 떠는 것이 더 좋다.", { main: 'E', opposite: 'I' }),

    // --- S vs N (인식) ---
    createQ(11, "나는 상상이나 아이디어보다 실제로 일어난 사실과 경험을 더 신뢰한다.", { main: 'S', opposite: 'N' }),
    createQ(12, "나는 일을 할 때 구체적인 매뉴얼이나 단계별 지침이 있는 것을 선호한다.", { main: 'S', opposite: 'N' }),
    createQ(13, "나는 추상적인 비유나 이론보다 눈에 보이는 데이터와 수치를 중요하게 생각한다.", { main: 'S', opposite: 'N' }),
    createQ(14, "나는 새로운 시도를 하기보다 검증된 기존의 방식을 따르는 것이 더 효율적이라 믿는다.", { main: 'S', opposite: 'N' }),
    createQ(15, "나는 영화나 드라마를 볼 때 숨겨진 의미를 찾기보다 있는 그대로의 스토리를 즐긴다.", { main: 'S', opposite: 'N' }),
    createQ(16, "나는 현실적인 문제 해결이 미래에 대한 막연한 비전보다 훨씬 더 시급하다고 느낀다.", { main: 'S', opposite: 'N' }),
    createQ(17, "나는 물건을 살 때 성능, 가격 등 객관적인 스펙을 꼼꼼하게 따지는 편이다.", { main: 'S', opposite: 'N' }),
    createQ(18, "나는 주변의 변화(머리 스타일, 옷차림 등)를 아주 세밀하게 잘 포착한다.", { main: 'S', opposite: 'N' }),
    createQ(19, "나는 복잡한 이론적 설명보다 직접 몸으로 부딪쳐 배우는 것을 선호한다.", { main: 'S', opposite: 'N' }),
    createQ(20, "나는 꿈이나 공상을 하기보다 현재 내가 하고 있는 일에 집중하는 편이다.", { main: 'S', opposite: 'N' }),

    // --- T vs F (판단) ---
    createQ(21, "나는 어떤 결정을 내릴 때 감정보다 논리적인 타당성을 우선시한다.", { main: 'T', opposite: 'F' }),
    createQ(22, "나는 친구가 고민을 털어놓을 때 위로보다 실질적인 해결책을 먼저 생각한다.", { main: 'T', opposite: 'F' }),
    createQ(23, "나는 옳고 그름을 판단할 때 예외를 두기보다 원칙을 지키는 것이 더 중요하다고 믿는다.", { main: 'T', opposite: 'F' }),
    createQ(24, "나는 업무나 프로젝트에서 인간관계보다 성과와 효율성을 더 중요하게 생각한다.", { main: 'T', opposite: 'F' }),
    createQ(25, "나는 비판적인 피드백을 들었을 때 감정적으로 상처받기보다 나를 개선할 기회로 삼는다.", { main: 'T', opposite: 'F' }),
    createQ(26, "나는 논리적으로 모순되는 주장을 보면 참지 못하고 지적하고 싶은 욕구가 생긴다.", { main: 'T', opposite: 'F' }),
    createQ(27, "나는 공평하다는 것은 모든 사람에게 똑같은 규칙을 적용하는 것이라고 생각한다.", { main: 'T', opposite: 'F' }),
    createQ(28, "나는 상황을 객관적으로 분석하기 위해 감정을 배제하고 제3자의 입장에서 보려 노력한다.", { main: 'T', opposite: 'F' }),
    createQ(29, "나는 '착한 사람'이라는 평가보다 '능력 있는 사람'이라는 평가가 더 기분 좋다.", { main: 'T', opposite: 'F' }),
    createQ(30, "나는 토론이나 협상에서 상대방의 감정을 배려하기보다 내 주장의 논리를 관철시키는 편이다.", { main: 'T', opposite: 'F' }),

    // --- J vs P (생활) ---
    createQ(31, "나는 여행을 갈 때 분 단위 혹은 시간 단위로 세부 일정을 짜야 안심이 된다.", { main: 'J', opposite: 'P' }),
    createQ(32, "나는 일을 시작하기 전에 항상 To-Do 리스트를 작성하고 우선순위를 정한다.", { main: 'J', opposite: 'P' }),
    createQ(33, "나는 약속 시간이 어긋나거나 계획이 갑자기 바뀌면 큰 스트레스를 받는다.", { main: 'J', opposite: 'P' }),
    createQ(34, "나는 사용한 물건은 제자리에 두어야 하며, 주변이 정리되어 있어야 집중이 잘 된다.", { main: 'J', opposite: 'P' }),
    createQ(35, "나는 마감 기한이 임박해서 일을 하기보다 미리미리 끝내두는 편을 선호한다.", { main: 'J', opposite: 'P' }),
    createQ(36, "나는 어떤 일을 결정하기 전에 모든 가능성을 분석하고 확신이 설 때까지 고민한다.", { main: 'J', opposite: 'P' }),
    createQ(37, "나는 일상의 루틴을 지키는 것이 삶의 안정감을 준다고 느낀다.", { main: 'J', opposite: 'P' }),
    createQ(38, "나는 한꺼번에 여러 일을 벌이기보다 하나를 완벽하게 끝내고 다음으로 넘어간다.", { main: 'J', opposite: 'P' }),
    createQ(39, "나는 준비되지 않은 즉흥적인 모임이나 제안은 거절하고 싶을 때가 많다.", { main: 'J', opposite: 'P' }),
    createQ(40, "나는 결과만큼 과정의 효율적인 시스템 구축이 중요하다고 생각한다.", { main: 'J', opposite: 'P' })
];

</script>
    <script>
// **[수정: 심층 분석 및 장단점 재작성 + AI 이미지 추가 + BGM 링크 적용(16곡 개별 적용)]**
const RESULTS_DATA = {
    // [MUSIC SOURCE INFO]
    // All tracks provided by Kevin MacLeod (incompetech.com)
    // Licensed under Creative Commons: By Attribution 4.0 License
    // http://creativecommons.org/licenses/by/4.0/

    "ISTJ": {
        genre: "CLASSIC & OST",
        subTitle: "원칙을 지키는 클래식 마에스트로",
        desc: `당신은 혼돈스러운 세상 속에서 흔들리지 않는 질서와 규율의 성벽을 쌓아 올리는 고결한 원칙주의자이자 침묵의 수행자입니다.\n\n심리학적으로 당신의 자아는 객관적인 사실과 검증된 데이터에 깊이 뿌리박혀 있으며, 예측 불가능한 감정이나 추상적인 개념보다는 만질 수 있는 현실과 지켜져야 할 전통에서 안정을 찾습니다. 타인들은 당신을 그저 보수적이거나 딱딱한 사람으로 오해할 수 있지만, 당신의 내면에는 그 누구보다 강한 책임감과 약속을 생명처럼 여기는 고귀한 신념이 흐르고 있습니다. 당신이 침묵하는 것은 할 말이 없어서가 아니라, 성급한 말보다는 완벽한 행동으로 증명하는 것이 옳다고 믿기 때문입니다.\n\n이러한 당신의 성향은 수백 년의 세월 동안 다듬어지고 정제된 클래식 음악이나, 완벽한 기승전결의 서사를 가진 영화 음악과 깊은 영혼의 공명을 일으킵니다. 클래식 음악의 엄격한 화성학적 규칙과 그 안에서 피어나는 절제된 아름다움은, 당신이 삶을 대하는 태도와 완벽하게 일치합니다.\n\n당신에게 이 음악은 단순한 청각적 유희가 아닙니다. 그것은 복잡하고 시끄러운 세상의 소음 속에서 당신의 지친 이성을 정화하는 성스러운 의식이며, 논리와 감성이 완벽한 균형을 이룰 때 느껴지는 지적 희열을 선사합니다. 장엄한 교향곡의 피날레처럼, 당신의 삶 또한 성실함과 인내 끝에 반드시 위대한 결실을 맺을 것입니다.`,
        bestSong: "Divertimento K131",
        color: "from-slate-900 via-gray-800 to-black",
        textColor: "text-slate-300",
        image: "assets/icon_istj.png",
        audioSrc: "https://incompetech.com/music/royalty-free/mp3-royaltyfree/Divertimento%20K131.mp3", // Classic
        coverPattern: "repeating-linear-gradient(90deg, rgba(255,255,255,0.05) 0px, rgba(255,255,255,0.05) 1px, transparent 1px, transparent 10px)",
        animClass: "animate-spin-slow",
        pros: [
            "한 번 맡은 일은 반드시 끝내는 불굴의 책임감",
            "감정에 휘둘리지 않는 냉철하고 객관적인 판단력",
            "복잡한 자료를 체계적으로 정리하는 탁월한 조직력",
            "주변의 얕은 유행에 흔들리지 않는 굳건한 신념",
            "위기 상황에서도 당황하지 않는 침착한 멘탈"
        ],
        cons: [
            "급격한 변화나 예상치 못한 상황에 대한 스트레스",
            "타인의 감정을 있는 그대로 공감하는 데 어려움",
            "융통성이 부족하고 고집이 세다는 오해를 받음",
            "스스로 설정한 지나치게 높은 기준에 의한 압박감",
            "새로운 아이디어를 수용하는 데 시간이 걸림"
        ]
    },
    "ISFJ": {
        genre: "ACOUSTIC BALLAD",
        subTitle: "따뜻한 온기의 수호천사",
        desc: `당신은 차가운 세상 속에서 타인의 상처를 가장 먼저 알아채고 보듬어주는 따뜻한 온기의 수호천사이자 헌신적인 치유자입니다.\n\n당신의 무의식 깊은 곳에는 타인에 대한 깊은 연민과 이타심이 내재되어 있으며, 자신의 안위보다 소중한 사람들의 행복을 지키기 위해 기꺼이 희생하는 고귀한 영혼을 지녔습니다. 심리학적 관점에서 당신은 감각적 공감 능력이 매우 발달하여, 상대방의 미세한 표정 변화나 목소리의 떨림까지도 감지해냅니다. 하지만 정작 자신의 내면이 곪아가는 것은 외면한 채, 타인의 기대에 부응하려다 소진되기 쉬운 여린 마음의 소유자이기도 합니다.\n\n화려한 기계음이나 자극적인 비트보다는, 사람의 숨결이 느껴지는 어쿠스틱 악기와 담백한 목소리가 어우러진 어쿠스틱 발라드가 당신의 영혼을 가장 부드럽게 어루만져 줍니다. 이 장르는 꾸미지 않은 순수함과 진정성을 담고 있어, 관계 속에서 지친 당신에게 너는 충분히 잘하고 있다는 위로의 메시지를 속삭입니다.\n\n당신에게 음악은 마음의 빗장을 풀고 쉴 수 있는 유일한 안식처입니다. 따뜻한 기타 선율이 공간을 채울 때, 당신은 비로소 타인을 향해 뻗어있던 신경을 거두고, 오롯이 당신 자신만을 위한 포근한 담요 같은 평온함을 느끼며 다시금 사랑할 힘을 얻게 될 것입니다.`,
        bestSong: "Somewhere Sunny",
        color: "from-amber-200 via-orange-300 to-amber-600",
        textColor: "text-amber-100",
        image: "assets/icon_isfj.png",
        audioSrc: "https://incompetech.com/music/royalty-free/mp3-royaltyfree/Somewhere%20Sunny.mp3", // Acoustic/Warm
        coverPattern: "radial-gradient(circle, rgba(255,255,255,0.2) 2px, transparent 2.5px)",
        animClass: "animate-float-slow",
        pros: [
            "타인의 감정을 섬세하게 살피는 뛰어난 공감력",
            "보이지 않는 곳에서 묵묵히 지원하는 헌신적 태도",
            "사소한 디테일까지 기억하는 놀라운 기억력",
            "안정적이고 조화로운 분위기를 만드는 평화주의자",
            "맡은 역할에 대해 끝까지 책임을 다하는 성실함"
        ],
        cons: [
            "거절을 잘 못하여 혼자서 과도한 짐을 짊어짐",
            "비판을 개인적인 비난으로 받아들여 깊게 상처받음",
            "자신의 욕구를 억누르다 내부에서 폭발할 수 있음",
            "변화에 대한 두려움으로 현재 상태에 안주하려 함",
            "지나치게 타인의 시선을 의식하여 위축될 수 있음"
        ]
    },
    "INFJ": {
        genre: "DREAM POP & SHOEGAZE",
        subTitle: "심연을 들여다보는 예언자",
        desc: `당신은 인구의 1%만이 공유하는 희귀한 영혼으로, 현실 너머의 본질을 꿰뚫어 보는 통찰력 있는 예언자이자 고독한 이상주의자입니다.\n\n겉으로 보이는 당신은 조용하고 신비로워 보이지만, 당신의 내면 우주는 그 어떤 드라마보다 격렬하고 방대합니다. 당신은 타인의 무의식적인 동기나 감정의 흐름을 본능적으로 감지하는 영적인 레이더를 지녔으며, 인류애와 도덕적 신념을 위해 끊임없이 고뇌합니다. 사람들은 당신이 너무 생각이 많다고 말하지만, 당신에게 생각은 멈출 수 없는 호흡과도 같습니다. 현실의 불완전함과 당신이 꿈꾸는 이상향 사이의 괴리는 때로 깊은 우울감을 주기도 하지만, 그것이 바로 당신이 가진 창조성의 원천입니다.\n\n몽환적인 리버브와 현실과 환상의 경계를 허무는 드림팝과 슈게이징 장르는 당신의 복잡한 내면 풍경을 소리로 그려낸 듯합니다. 층층이 쌓인 소리의 벽 속에서 당신은 말로 표현할 수 없는 감정의 해방을 느끼며, 비로소 물질적인 세계의 중력에서 벗어나 자유롭게 부유합니다.\n\n당신에게 음악은 우주와 교신하는 주파수와 같습니다. 그 신비로운 멜로디 속에서 당신은 타인은 결코 이해할 수 없는 영적인 깨달음을 얻고, 당신의 깊은 슬픔조차 아름다운 예술로 승화시키는 카타르시스를 경험합니다.`,
        bestSong: "Fluidscape",
        color: "from-indigo-400 via-purple-400 to-indigo-800",
        textColor: "text-indigo-100",
        image: "assets/icon_infj.png",
        audioSrc: "https://incompetech.com/music/royalty-free/mp3-royaltyfree/Fluidscape.mp3", // Atmospheric/Dreamy
        coverPattern: "linear-gradient(135deg, rgba(255,255,255,0.1) 25%, transparent 25%) -50px 0, linear-gradient(225deg, rgba(255,255,255,0.1) 25%, transparent 25%) -50px 0",
        coverSize: "100px 100px",
        animClass: "animate-pulse-slow",
        pros: [
            "사물의 본질과 사람의 속마음을 꿰뚫는 통찰력",
            "도덕적 신념과 인류애를 추구하는 고결한 가치관",
            "복잡한 문제를 창의적이고 은유적으로 해결",
            "깊이 있는 대화를 통해 타인에게 영감을 줌",
            "계획적이고 단호하게 목표를 향해 나아가는 추진력"
        ],
        cons: [
            "현실 감각이 부족하여 사소한 일상 관리에 소홀함",
            "너무 높은 이상주의적 기준으로 인해 쉽게 좌절함",
            "자신의 속마음을 좀처럼 드러내지 않아 이해받기 어려움",
            "지나친 완벽주의로 스스로를 끊임없이 괴롭힘",
            "갈등 상황을 극도로 회피하려다 문제를 키울 수 있음"
        ]
    },
    "INTJ": {
        genre: "PROGRESSIVE ROCK",
        subTitle: "차가운 이성의 설계자",
        desc: `당신은 감정의 동요 없이 오직 논리와 전략만으로 미래를 설계하는 차가운 이성의 건축가이자 마스터마인드입니다.\n\n심리학적으로 당신의 사고 회로는 효율성과 시스템 개선에 최적화되어 있습니다. 당신에게 세상은 거대한 체스판과 같아서, 남들이 현재의 문제에 허덕일 때 당신은 이미 다섯 수 앞을 내다보고 승리를 위한 최적의 경로를 계산합니다. 권위나 관습 따위는 당신에게 중요하지 않으며, 오직 '그것이 논리적으로 타당한가?'만이 유일한 판단 기준입니다. 때로 오만하거나 냉소적이라는 평가를 받지만, 그것은 당신이 진실을 찾기 위해 불필요한 사교적 가식을 벗어던졌기 때문입니다.\n\n변칙적인 박자, 고도의 연주 테크닉, 그리고 철학적인 주제를 다루는 프로그레시브 락은 당신의 복잡하고 지적인 뇌를 자극하는 유일한 장르입니다. 뻔한 사랑 노래나 단순한 멜로디는 당신에게 지루한 소음일 뿐입니다.\n\n당신에게 음악은 감상하는 것이 아니라 해독하고 분석해야 할 고차원적인 퍼즐입니다. 정교하게 설계된 곡의 구조를 파악하고 그 안의 숨겨진 의도를 발견할 때, 당신은 단순한 쾌감을 넘어선 지적 희열을 느낍니다. 이 음악은 당신의 고독한 천재성을 증명하는 배경음악이며, 당신이 꿈꾸는 완벽한 시스템의 청각적 청사진입니다.`,
        bestSong: "Hitman",
        color: "from-blue-600 via-blue-800 to-slate-900",
        textColor: "text-blue-200",
        image: "assets/icon_intj.png",
        audioSrc: "https://incompetech.com/music/royalty-free/mp3-royaltyfree/Hitman.mp3", // Dark/Complex
        coverPattern: "repeating-linear-gradient(45deg, rgba(255,255,255,0.05) 0px, rgba(255,255,255,0.05) 2px, transparent 2px, transparent 4px)",
        animClass: "animate-spin-slow",
        pros: [
            "복잡한 문제의 핵심을 파악하는 전략적 사고능력",
            "장기적인 비전을 수립하고 실현하는 추진력",
            "감정에 치우치지 않는 냉철하고 객관적인 결정",
            "끊임없이 지식을 탐구하고 자기 계발에 힘씀",
            "비효율적인 관습을 타파하는 혁신적인 마인드"
        ],
        cons: [
            "타인의 감정을 고려하지 않는 직설적인 화법",
            "자신의 지적 능력에 대한 오만함으로 비칠 수 있음",
            "사소한 실수나 비논리적인 상황을 참지 못함",
            "지나친 분석으로 인해 행동이 늦어질 수 있음",
            "사회적 규범이나 예의를 무시하여 고립될 수 있음"
        ]
    },
    "ISTP": {
        genre: "TECHNO & GARAGE",
        subTitle: "고독한 기술의 장인",
        desc: `당신은 말이 아닌 행동으로, 이론이 아닌 실전 감각으로 세상을 조율하는 고독한 기술의 장인이자 만능 재주꾼입니다.\n\n심리학적으로 당신은 최소한의 노력으로 최대의 효율을 추구하는 에너지 절약형 천재입니다. 복잡한 감정싸움이나 형이상학적인 논쟁에는 하품을 하지만, 고장 난 기계를 고치거나 위기 상황을 돌파해야 할 때 당신의 눈빛은 무서울 정도로 예리하게 빛납니다. 당신은 그 누구의 간섭도 받지 않는 절대적인 자유를 갈망하며, 자신의 영역이 침범받는 것을 극도로 싫어하는 고양이 같은 독립성을 지녔습니다. 당신의 손과 감각은 현존하는 그 어떤 매뉴얼보다 정확합니다.\n\n기계적이고 반복적인 비트, 차가우면서도 세련된 질감의 테크노와 개러지 음악은 당신의 군더더기 없는 성향을 완벽하게 대변합니다. 감정을 강요하는 멜로디 없이, 오직 리듬과 소리의 질감만으로 승부하는 이 장르는 당신에게 최적의 몰입감을 선사합니다.\n\n당신에게 음악은 복잡한 머릿속을 비워주는 백색 소음이자, 심장 박동을 튜닝하는 도구입니다. 차가운 비트 위를 유영하며 당신은 세상의 모든 귀찮은 의무로부터 로그아웃하고, 오직 당신의 감각만이 살아 숨 쉬는 쿨하고 시크한 무아지경의 상태에 빠져들게 됩니다.`,
        bestSong: "Ice Flow",
        color: "from-zinc-500 via-slate-700 to-black",
        textColor: "text-zinc-300",
        image: "assets/icon_istp.png",
        audioSrc: "https://incompetech.com/music/royalty-free/mp3-royaltyfree/Ice%20Flow.mp3", // Cool/Techno
        coverPattern: "radial-gradient(rgba(255,255,255,0.1) 8%, transparent 8%)",
        coverSize: "20px 20px",
        animClass: "animate-pulse-fast",
        pros: [
            "위기 상황에서 당황하지 않고 해결책을 찾는 순발력",
            "도구나 기계를 다루는 탁월한 손재주와 감각",
            "불필요한 감정 소모를 하지 않는 쿨한 태도",
            "효율성을 극대화하여 빠르게 목표를 달성함",
            "편견 없이 사실 그대로를 받아들이는 유연함"
        ],
        cons: [
            "타인과의 감정적인 유대나 깊은 대화를 회피함",
            "쉽게 지루함을 느껴 끈기 있게 마무리하지 못함",
            "지나치게 위험을 감수하거나 스릴을 추구함",
            "계획 없이 충동적으로 행동하여 주변을 불안하게 함",
            "무표정하고 무뚝뚝하여 차갑다는 오해를 많이 받음"
        ]
    },
    "ISFP": {
        genre: "INDIE SOUL & NEO SOUL",
        subTitle: "영혼을 그리는 예술가",
        desc: `당신은 세상의 모든 색채와 소리를 당신만의 고유한 감성 필터로 받아들이는 영혼을 그리는 예술가이자 침대 위의 철학자입니다.\n\n심리학적으로 당신은 타인의 평가나 사회적 성공보다는, '내가 진정으로 느끼는가?'라는 내면의 진실성을 최우선 가치로 둡니다. 당신은 말로 표현하기 힘든 미묘한 감정의 결을 감각적으로 포착해내는 섬세함을 지녔으며, 갈등과 경쟁을 피해 조용히 자신만의 아름다운 소우주를 가꾸어갑니다. 겉으로는 유순하고 수줍어 보이지만, 내면에는 그 누구도 꺾을 수 없는 예술적 고집과 뜨거운 열정이 용암처럼 흐르고 있습니다.\n\n그루브가 살아있는 비트 위에 감성적인 보컬이 얹혀진 인디 소울과 네오 소울은 당신의 섬세한 취향을 저격하는 음악입니다. 너무 시끄럽지도, 너무 처지지도 않는 세련된 리듬은 당신의 심장 박동과 동기화되어 편안한 흐름을 만들어냅니다.\n\n당신에게 음악은 영혼을 비추는 거울이자, 세상으로부터 숨을 수 있는 나만의 아지트입니다. 흐느적거리는 소울 음악에 몸을 맡길 때, 당신은 비로소 타인의 시선이라는 감옥에서 벗어나 온전히 당신 자신으로 존재하게 됩니다. 그 순간, 당신의 모든 감각은 깨어나고 아주 평범한 일상조차 영화의 한 장면처럼 낭만적으로 변모합니다.`,
        bestSong: "Deuces",
        color: "from-rose-300 via-pink-400 to-rose-600",
        textColor: "text-rose-100",
        image: "assets/icon_isfp.png",
        audioSrc: "https://incompetech.com/music/royalty-free/mp3-royaltyfree/Deuces.mp3", // Smooth/Soul
        coverPattern: "url(\"data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23ffffff' fill-opacity='0.2' fill-rule='evenodd'%3E%3Ccircle cx='3' cy='3' r='3'/%3E%3Ccircle cx='13' cy='13' r='3'/%3E%3C/g%3E%3C/svg%3E\")",
        animClass: "animate-wave",
        pros: [
            "타인을 편안하게 해주는 온화하고 겸손한 태도",
            "남들이 보지 못하는 미적 아름다움을 발견하는 감각",
            "형식에 얽매이지 않고 유연하게 상황을 받아들임",
            "현재의 순간을 소중히 여기고 즐길 줄 아는 여유",
            "말로 표현하지 않아도 행동으로 보여주는 따뜻한 배려"
        ],
        cons: [
            "자신의 능력을 과소평가하고 자신감이 부족함",
            "거절을 못 하고 속으로만 끙끙 앓는 성격",
            "장기적인 계획을 세우거나 실행하는 데 약함",
            "갈등 상황을 지나치게 회피하여 문제를 키움",
            "비판을 받으면 쉽게 상처받고 의기소침해짐"
        ]
    },
    "INFP": {
        genre: "LO-FI & BEDROOM POP",
        subTitle: "별을 헤아리는 몽상가",
        desc: `당신은 부조리한 현실 세계에 발을 딛고 있지만, 영혼은 언제나 저 먼 이상향을 부유하는 별을 헤아리는 몽상가이자 상처 입은 치유자입니다.\n\n당신은 이 세상의 언어로는 다 표현할 수 없는 깊은 슬픔과 아름다움을 동시에 품고 사는 사람입니다. 심리학적으로 당신은 타인의 고통을 마치 자신의 것처럼 느끼는 초공감 능력을 지녔으며, 진정성 없는 가식적인 관계나 속물적인 성공을 경멸합니다. 당신은 끊임없이 '나는 누구인가?'라는 실존적 질문을 던지며, 자신만의 고유한 정체성을 찾기 위해 내면의 깊은 숲속을 헤매는 방랑자입니다.\n\n약간의 노이즈가 섞인 낡은 카세트테이프 소리, 빗소리처럼 젖어 든 멜로디의 로파이와 베드룸 팝은 당신의 우울하면서도 낭만적인 감수성과 완벽하게 공명합니다. 화려하지 않고 소박하며, 어딘가 결핍된 듯한 이 음악은 완벽하지 않은 당신의 모습 그대로를 안아줍니다.\n\n당신에게 음악은 상처 입은 영혼을 위한 붕대이자, 현실의 중력을 끊어내는 마법의 주문입니다. 비 오는 날 창가에 기대어 이 음악을 들을 때, 당신은 고독조차 달콤한 친구로 받아들이게 되며, 당신의 슬픔은 세상에서 가장 아름다운 시가 되어 흐를 것입니다.`,
        bestSong: "Peace of Mind",
        color: "from-teal-200 via-emerald-300 to-teal-600",
        textColor: "text-teal-100",
        image: "assets/icon_infp.png",
        audioSrc: "https://incompetech.com/music/royalty-free/mp3-royaltyfree/Peace%20of%20Mind.mp3", // Lofi/Calm
        coverPattern: "url(\"data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.2'/%3E%3C/svg%3E\")",
        animClass: "animate-float-slow",
        pros: [
            "타인의 감정을 깊이 이해하고 위로하는 공감력",
            "자신만의 독창적이고 창의적인 세계관 보유",
            "이해타산을 따지지 않는 순수하고 진정성 있는 태도",
            "언어적 재능이 뛰어나 글이나 말로 감동을 줌",
            "개방적이고 편견 없이 다양성을 존중함"
        ],
        cons: [
            "현실적인 경제 관념이나 시간 관리에 매우 취약함",
            "작은 비난에도 세상이 무너진 듯 상처받음",
            "생각만 하다가 정작 행동으로 옮기지 못함",
            "혼자만의 세계에 갇혀 외부와 단절될 위험",
            "지나친 이상주의로 인해 현실에 늘 불만족함"
        ]
    },
    "INTP": {
        genre: "IDM & EXPERIMENTAL",
        subTitle: "진리를 탐구하는 괴짜",
        desc: `당신은 우주의 모든 현상을 해체하여 그 이면의 논리적 구조를 밝혀내려는 진리를 탐구하는 괴짜이자 지적 방랑자입니다.\n\n당신의 머릿속은 거대한 도서관이자 24시간 돌아가는 연구소입니다. 심리학적으로 당신은 기존의 관습이나 권위에 맹목적으로 따르는 것을 "지적 태만"으로 간주하며, 끊임없이 "왜?"라는 질문을 던져 기존 질서를 전복시키는 아이디어 뱅크입니다. 당신에게 사교적 대화나 감정적 위로는 비효율적인 데이터 교환일 뿐이며, 오직 새로운 지식과 추상적인 이론만이 당신의 도파민을 자극합니다. 당신은 남들이 보지 못하는 패턴을 보지만, 양말 짝을 맞추는 법은 자주 잊어버립니다.\n\n불규칙한 박자, 기계적인 소음과 서정적인 멜로디가 기이하게 섞인 IDM(지능형 댄스 뮤직)과 실험 음악은 당신의 뇌 구조를 청각화한 것입니다. 예측할 수 없는 전개와 난해한 사운드는 당신의 지적 호기심을 끊임없이 자극합니다.\n\n당신에게 음악은 감동을 위한 것이 아니라 탐구를 위한 대상입니다. 소리의 질서와 무질서 사이를 줄타기하는 이 난해한 음악 속에서, 당신은 역설적이게도 가장 명쾌한 논리의 아름다움을 발견합니다. 남들은 소음이라 부르는 것에서 당신은 우주의 수학적 질서를 듣고 있는 것입니다.`,
        bestSong: "Pamgaea",
        color: "from-violet-500 via-fuchsia-600 to-purple-900",
        textColor: "text-violet-200",
        image: "assets/icon_intp.png",
        audioSrc: "https://incompetech.com/music/royalty-free/mp3-royaltyfree/Pamgaea.mp3", // Complex/Trance
        coverPattern: "repeating-radial-gradient(circle, transparent, transparent 3.5px, rgba(255,255,255,0.1) 3.5px, rgba(255,255,255,0.1) 4px)",
        animClass: "animate-pulse-fast",
        pros: [
            "복잡한 문제를 논리적으로 분해하고 해결하는 능력",
            "고정관념을 깬 독창적이고 천재적인 아이디어",
            "관심 있는 분야에 대한 엄청난 몰입과 전문성",
            "감정에 치우치지 않는 객관적이고 비판적인 시각",
            "끊임없이 배우고 성장하려는 지적 욕구"
        ],
        cons: [
            "타인의 감정을 이해하거나 공감하는 능력이 부족함",
            "생각을 설명할 때 너무 어렵게 말해 소통이 힘듦",
            "지나친 회의주의로 인해 결론을 내리지 못함",
            "청소나 정리 정돈 같은 일상적인 규율을 무시함",
            "사회적 눈치를 보지 않아 엉뚱한 행동을 함"
        ]
    },
    "ESTP": {
        genre: "HIPHOP & TRAP",
        subTitle: "본능적인 승부사",
        desc: `당신은 위험한 상황일수록 심장이 뜨겁게 뛰는 본능적인 승부사이자 아스팔트 위의 야수입니다.\n\n당신에게 인생은 리허설이 없는 실전이며, 고민할 시간에 일단 저지르고 보는 행동파입니다. 심리학적으로 당신은 오감을 통해 들어오는 현재의 자극에 극도로 예민하며, 복잡한 이론보다는 눈앞의 이익과 확실한 결과를 선호합니다. 당신은 탁월한 임기응변과 넘치는 자신감으로 좌중을 압도하며, 꽉 막힌 규율을 비웃으며 자신만의 길을 개척하는 스타일입니다. 당신을 가두려 하면 할수록 당신은 더 높이 튀어 오를 것입니다.\n\n심장을 강타하는 808 베이스와 공격적인 랩핑이 돋보이는 힙합과 트랩은 당신의 끓어오르는 혈기를 분출하는 완벽한 배출구입니다. 이 음악의 거친 질감과 폭발적인 에너지는 당신의 야성적 본능과 100% 동기화됩니다.\n\n당신에게 음악은 전투가가 전장에 나가기 전 듣는 전투 함성입니다. 볼륨을 최대로 높이고 비트에 몸을 맡기는 순간, 당신은 세상의 주인공이 된 듯한 전능감을 느끼며, 당신 앞을 가로막는 모든 장애물을 부숴버릴 듯한 폭발적인 에너지를 얻게 됩니다. "일단 해보자", 그것이 당신의 유일한 철학이기 때문입니다.`,
        bestSong: "District Four",
        color: "from-red-500 via-red-700 to-black",
        textColor: "text-red-300",
        image: "assets/icon_estp.png",
        audioSrc: "https://incompetech.com/music/royalty-free/mp3-royaltyfree/District%20Four.mp3", // Energetic/Driving
        coverPattern: "linear-gradient(45deg, rgba(255, 255, 255, 0.1) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.1) 50%, rgba(255, 255, 255, 0.1) 75%, transparent 75%, transparent)",
        coverSize: "20px 20px",
        animClass: "animate-bounce-slow",
        pros: [
            "어떤 위기 상황도 기회로 바꾸는 임기응변",
            "좌중을 휘어잡는 카리스마와 유머 감각",
            "직설적이고 솔직한 화법으로 문제를 빠르게 해결",
            "새로운 도전과 모험을 두려워하지 않는 용기",
            "타의 추종을 불허하는 행동력과 실행력"
        ],
        cons: [
            "장기적인 결과를 생각하지 않는 충동적인 행동",
            "지루함을 참지 못해 벌려놓은 일을 마무리 못 함",
            "타인의 감정을 고려하지 않는 직설적인 언행",
            "규칙이나 약속을 억압이라 느껴 어기는 경향",
            "진지하고 깊은 대화를 회피하고 가벼움만 추구"
        ]
    },
    "ESFP": {
        genre: "TROPICAL HOUSE",
        subTitle: "무대 위의 슈퍼스타",
        desc: `당신은 전생에 조명이 쏟아지는 무대의 주인공이었을 것이 분명한 천부적인 슈퍼스타이자 인간 비타민입니다.\n\n당신이 있는 곳에는 언제나 웃음과 활기가 넘쳐흐릅니다. 심리학적으로 당신은 타인의 관심과 사랑을 먹고 자라는 존재이며, "인생은 즐기기에도 너무 짧다"는 명언을 몸소 실천하는 쾌락주의자입니다. 당신은 슬픈 분위기를 본능적으로 거부하며, 당신의 밝은 에너지는 우울한 사람조차 춤추게 만드는 전염성을 가지고 있습니다. 하지만 그 밝음 뒤엔, 홀로 남겨지는 것에 대한 깊은 두려움이 숨겨져 있을지도 모릅니다. 그래도 당신은 웁니다, 슬퍼서가 아니라 아직 즐거운 일이 너무 많이 남았기 때문입니다.\n\n청량한 바다와 뜨거운 태양, 칵테일 한 잔의 여유가 느껴지는 트로피컬 하우스는 당신의 영혼을 위한 주제곡입니다. 경쾌한 리듬과 시원한 신시사이저 소리는 당신의 심장을 다시 뛰게 만드는 아드레날린 주사기입니다.\n\n당신에게 음악은 혼자가 아님을 확인시켜주는 축제입니다. 이 음악이 흐르면 당신은 언제 어디서든 자신만의 런웨이를 걷게 됩니다. 복잡한 고민은 잠시 접어두세요. 지금 이 순간, 쏟아지는 비트 위에서 춤추는 당신이야말로 진정 살아있는 존재입니다.`,
        bestSong: "Island Meet and Greet",
        color: "from-yellow-300 via-orange-400 to-red-500",
        textColor: "text-amber-100",
        image: "assets/icon_esfp.png",
        audioSrc: "https://incompetech.com/music/royalty-free/mp3-royaltyfree/Island%20Meet%20and%20Greet.mp3", // Tropical/Happy
        coverPattern: "radial-gradient(circle, rgba(255,255,255,0.4) 2px, transparent 2.5px)",
        animClass: "animate-spin-slow",
        pros: [
            "주변 사람들을 즐겁게 만드는 탁월한 엔터테이너 기질",
            "어떤 환경에서도 적응하고 친구를 만드는 사교성",
            "미적 감각이 뛰어나고 패션과 유행을 선도함",
            "현재의 삶을 긍정적으로 바라보는 낙천적인 태도",
            "타인을 돕고 기쁘게 하는 데서 에너지를 얻음"
        ],
        cons: [
            "진지한 상황을 견디지 못하고 장난으로 넘기려 함",
            "계획성 없이 돈이나 시간을 낭비하는 경향",
            "내면의 부정적인 감정을 외면하고 회피함",
            "비판을 받으면 쉽게 토라지거나 감정적으로 대응",
            "미래에 대한 대비 없이 당장의 즐거움만 좇음"
        ]
    },
    "ENFP": {
        genre: "CITY POP & SYNTHWAVE",
        subTitle: "가능성의 혁명가",
        desc: `당신은 지루한 현실 세계에 마법의 가루를 뿌리고 다니는 가능성의 혁명가이자 영원한 피터팬입니다.\n\n당신의 눈은 남들이 보지 못하는 무지갯빛 미래를 보고 있습니다. 심리학적으로 당신은 외부 세계의 다양한 가능성을 탐색하는 직관 기능이 폭발적으로 발달하여, 한 가지에 얽매이기보다는 끊임없이 새로운 자극과 영감을 찾아 떠도는 영혼입니다. 당신은 사람들을 자석처럼 끌어당기는 매력을 가졌으며, 타인의 잠재력을 발견하고 불을 지펴주는 인간 기폭제 역할을 합니다. 하지만 당신의 열정은 쉽게 타오르는 만큼 쉽게 식기도 하여, 벌려놓은 일은 많으나 수습은 남의 몫이 되기도 합니다.\n\n도시의 화려한 네온사인과 낭만적인 밤거리를 연상시키는 시티팝과 신스웨이브는 당신의 세련된 감수성과 복고풍의 낭만을 자극합니다. 어딘가 그리우면서도 설레는 이 멜로디는 당신이 꿈꾸는 이상적인 세계의 배경음악입니다.\n\n당신에게 음악은 현실 도피를 위한 우주선입니다. 이 몽환적인 사운드에 몸을 실으면, 당신은 반복되는 일상의 지루함에서 탈출하여 영화 속 주인공이 됩니다. 당신의 삶은 이 음악처럼 언제나 예측할 수 없고, 반짝이며, 가슴 벅찬 모험으로 가득 차야만 합니다.`,
        bestSong: "Who Likes to Party",
        color: "from-pink-400 via-purple-500 to-indigo-600",
        textColor: "text-pink-100",
        image: "assets/icon_enfp.png",
        audioSrc: "https://incompetech.com/music/royalty-free/mp3-royaltyfree/Who%20Likes%20to%20Party.mp3", // Party/Fun
        coverPattern: "repeating-linear-gradient(0deg, transparent, transparent 19px, rgba(255,255,255,0.1) 20px)",
        animClass: "animate-bounce-slow",
        pros: [
            "창의적인 아이디어와 영감이 끊임없이 샘솟음",
            "타인의 장점을 발견하고 칭찬해 주는 따뜻한 마음",
            "어떤 상황에서도 긍정적인 면을 찾아내는 능력",
            "말솜씨가 뛰어나고 설득력이 좋음",
            "변화를 두려워하지 않고 새로운 도전을 즐김"
        ],
        cons: [
            "집중력이 부족하여 한 가지 일을 끝까지 못 함",
            "세부적인 계획이나 반복적인 업무에 극도로 취약",
            "감정 기복이 심해 주변 사람을 당황하게 함",
            "지나치게 남의 인정을 갈구하고 거절을 못 함",
            "현실적인 문제를 무시하고 이상만 좇을 수 있음"
        ]
    },
    "ENTP": {
        genre: "GLITCH HOP & HYPERPOP",
        subTitle: "유쾌한 소란꾼",
        desc: `당신은 평온한 호수에 기어이 돌을 던져 파문을 일으키는 유쾌한 소란꾼이자 지적 악동입니다.\n\n당신에게 "원래 그런 것"은 세상에서 가장 참을 수 없는 말입니다. 심리학적으로 당신은 기존의 체제와 권위의 모순을 찾아내어 비트는 데서 희열을 느끼며, 논쟁은 당신에게 싸움이 아니라 즐거운 스포츠입니다. 당신의 뇌는 남들과 다른 각도로 배선되어 있어, 엉뚱하지만 천재적인 발상을 쏟아냅니다. 사람들은 당신을 두고 '미친 천재' 아니면 '그냥 미친 사람'이라고 부르지만, 당신은 그 두 평가를 모두 즐깁니다. 당신은 혼돈 속에서 질서를 창조하는 것이 아니라, 질서 속에서 혼돈을 창조하여 새로운 가능성을 엽니다.\n\n소리의 규칙을 파괴하고, 예측 불가능한 변주와 스위칭이 난무하는 글리치 합과 하이퍼팝은 당신의 뇌 속 풍경을 그대로 옮겨놓은 듯합니다. 정상적인 멜로디를 비틀고 찢어발기는 이 파격적인 사운드는 당신의 파괴적 혁신 본능을 만족시킵니다.\n\n당신에게 음악은 세상을 조롱하는 유쾌한 농담입니다. 어디로 튈지 모르는 비트 위에서 당신은 지루한 상식의 틀을 깨부수고, 당신만의 기괴하고도 매력적인 논리를 증명해 보입니다. 정상적이지 않아서 더 완벽한, 그것이 바로 당신의 바이브입니다.`,
        bestSong: "Spazzmatica Polka",
        color: "from-lime-300 via-green-400 to-lime-600",
        textColor: "text-lime-200",
        image: "assets/icon_entp.png",
        audioSrc: "https://incompetech.com/music/royalty-free/mp3-royaltyfree/Spazzmatica%20Polka.mp3", // Quirky/Fast
        coverPattern: "repeating-linear-gradient(45deg, rgba(255,255,255,0.1) 0px, rgba(255,255,255,0.1) 10px, transparent 10px, transparent 20px)",
        animClass: "animate-pulse-fast",
        pros: [
            "누구도 생각 못한 독창적인 관점과 아이디어",
            "논리적인 분석력과 언변으로 상대를 설득함",
            "새로운 지식과 기술을 스펀지처럼 흡수하는 두뇌",
            "복잡한 문제를 다양한 각도에서 해결하는 능력",
            "실패를 두려워하지 않고 끊임없는 도전 정신"
        ],
        cons: [
            "타인의 감정을 고려하지 않는 공격적인 토론 태도",
            "마무리가 약하고 뒷심이 부족해 용두사미가 됨",
            "일상적인 업무나 세부 사항을 지루해하고 소홀함",
            "자신이 흥미 없는 일에는 철저히 무관심함",
            "약속 시간이나 규칙을 가볍게 여기는 경향"
        ]
    },
    "ESTJ": {
        genre: "POP ROCK & ANTHEM",
        subTitle: "불도저 같은 사령관",
        desc: `당신은 목표를 향해 거침없이 돌진하는 불도저 같은 사령관이자 현실 세계의 지배자입니다.\n\n당신의 사전에는 '대충'이나 '게으름'이라는 단어가 없습니다. 심리학적으로 당신은 외향적 사고를 통해 세상을 효율적으로 조직화하고 통제하려는 욕구가 강하며, 전통과 질서를 수호하는 기둥 역할을 자처합니다. 당신은 모호한 말장난을 혐오하며, 눈에 보이는 성과와 데이터를 신뢰합니다. 리더의 자리는 당신이 원해서가 아니라, 남들이 우왕좌왕할 때 당신만이 명확한 답을 제시하기 때문에 자연스럽게 당신의 차지가 됩니다. 당신의 카리스마는 따뜻함이 아니라 확실함에서 나옵니다.\n\n강렬한 드럼 비트, 시원하게 뻗어 나가는 기타 리프, 그리고 확실한 클라이맥스가 있는 팝 락과 앤썸 장르는 당신의 직선적인 성격을 대변합니다. 흐지부지 끝나는 곡은 딱 질색입니다. 시작과 끝이 분명하고 에너지가 넘치는 이 음악은 당신의 전투력을 상승시킵니다.\n\n당신에게 음악은 승리를 위한 행진곡입니다. 출근길이나 운동할 때 이 음악을 들으며 당신은 '오늘도 세상을 정복하러 간다'는 전의를 다집니다. 비트가 강해질수록 당신의 확신도 강해집니다. 당신은 틀리지 않았습니다, 언제나 그랬듯이 당신의 길은 정답이 될 것입니다.`,
        bestSong: "Rock on Chicago",
        color: "from-blue-500 via-cyan-600 to-blue-800",
        textColor: "text-blue-200",
        image: "assets/icon_estj.png",
        audioSrc: "https://incompetech.com/music/royalty-free/mp3-royaltyfree/Rock%20on%20Chicago.mp3", // Rock
        coverPattern: "linear-gradient(90deg, rgba(255,255,255,0.1) 50%, transparent 50%)",
        coverSize: "40px 100%",
        animClass: "animate-bounce-slow",
        pros: [
            "목표를 달성하기 위한 구체적인 계획과 실행력",
            "조직을 체계적으로 관리하고 이끄는 리더십",
            "맡은 책임은 무슨 일이 있어도 완수하는 성실함",
            "공과 사를 명확히 구분하는 객관적인 태도",
            "효율성을 높여 불필요한 시간과 자원을 절약함"
        ],
        cons: [
            "자신의 방식만 고집하고 타인의 의견을 무시함",
            "직설적인 화법으로 상대방에게 상처를 줄 수 있음",
            "변화에 저항하고 기존 방식을 고수하려는 보수성",
            "일 중독 성향으로 인해 휴식을 취하지 못함",
            "감정적인 호소나 인간적인 사정을 봐주지 않음"
        ]
    },
    "ESFJ": {
        genre: "K-POP & TEEN POP",
        subTitle: "모두의 다정할 친구",
        desc: `당신은 사람과 사람 사이를 따뜻한 온기로 연결하는 모두의 다정한 친구이자 관계의 마법사입니다.\n\n당신의 하루는 "오늘 기분 어때?"라는 안부 인사로 시작됩니다. 심리학적으로 당신은 타인의 감정 상태를 살피고 조화를 이루는 데서 자신의 존재 가치를 느끼며, 그룹 내에 갈등이 생기면 누구보다도 괴로워하는 평화주의자입니다. 당신은 타고난 오지랖으로 주변 사람들을 챙기며, 칭찬과 인정이라는 연료가 있어야만 움직이는 사랑스러운 관심종자이기도 합니다. 당신이 없는 모임은 앙꼬 없는 찐빵처럼 삭막할 것입니다.\n\n밝고 경쾌하며, 모두가 따라 부를 수 있는 친숙한 멜로디의 K-POP과 틴 팝은 당신의 밝은 에너지를 상징합니다. 혼자 듣는 심오한 음악보다는, 친구들과 함께 떼창하고 춤출 수 있는 대중적인 음악이 당신의 심장을 뛰게 합니다.\n\n당신에게 음악은 '함께함'의 기쁨입니다. 유행하는 노래를 들으며 트렌드를 공유하고, 신나는 리듬에 맞춰 사람들과 어우러질 때 당신은 비로소 완전한 행복을 느낍니다. 이 음악은 당신이 세상에 전하고 싶은 해피 바이러스이며, 우리 모두 하나로 묶어주는 사랑의 연결 고리입니다.`,
        bestSong: "Life of Riley",
        color: "from-pink-200 via-pink-400 to-rose-500",
        textColor: "text-white",
        image: "assets/icon_esfj.png",
        audioSrc: "https://incompetech.com/music/royalty-free/mp3-royaltyfree/Life%20of%20Riley.mp3", // Happy/Upbeat
        coverPattern: "radial-gradient(circle, rgba(255,255,255,0.3) 2px, transparent 2.5px)",
        animClass: "animate-spin-slow",
        pros: [
            "타인을 배려하고 돕는 따뜻하고 친절한 성품",
            "조직의 분위기를 밝고 조화롭게 만드는 능력",
            "책임감이 강하고 맡은 역할을 충실히 수행함",
            "소속감이 강하고 사람들과의 유대를 소중히 여김",
            "현실적인 감각이 뛰어나고 생활력이 강함"
        ],
        cons: [
            "타인의 시선과 평가에 지나치게 민감함",
            "거절을 못 하고 싫은 소리를 못 해 스트레스받음",
            "자신이 베푼 만큼 보상받지 못하면 서운해함",
            "비판을 받으면 방어적으로 변하고 상처받음",
            "변화보다는 익숙하고 안정적인 것을 과도하게 선호"
        ]
    },
    "ENFJ": {
        genre: "GOSPEL & SOUL",
        subTitle: "열정적인 선동가",
        desc: `당신은 사람들의 가슴속에 잠든 불꽃을 점화시키는 열정적인 선동가이자 인류애의 화신입니다.\n\n당신은 단순히 밥을 먹고 살기 위해 사는 것이 아니라, 더 나은 세상을 만들기 위해 태어났다고 믿습니다. 심리학적으로 당신은 타인의 잠재력을 꿰뚫어 보고 그들이 성장하도록 돕는 데서 최고의 희열을 느끼는 멘토형 리더입니다. 당신의 말에는 사람을 움직이는 힘이 있으며, 당신의 진심 어린 호소는 차가운 이성보다 뜨거운 감동으로 세상을 변화시킵니다. 때로 "너무 이상적이다"라는 비판을 받지만, 당신 같은 몽상가들이 없었다면 세상은 여전히 차가운 얼음장이었을 것입니다.\n\n영혼을 울리는 웅장한 보컬과 가슴 벅찬 멜로디의 가스펠과 소울 음악은 당신의 숭고한 정신세계를 대변합니다. 고통 속에서도 희망을 노래하고, 결국에는 사랑과 화합으로 귀결되는 이 드라마틱한 음악은 당신의 눈시울을 붉게 만듭니다.\n\n당신에게 음악은 영혼을 정화하는 성수이자, 사람들을 하나로 묶는 기도입니다. 벅차오르는 고음과 풍성한 하모니 속에서 당신은 인류를 향한 벅찬 사랑을 느끼며, 다시 한번 세상을 따뜻하게 안아줄 용기를 얻습니다. 당신은 혼자가 아닙니다, 이 음악이 당신의 숭고한 여정을 응원하고 있으니까요.`,
        bestSong: "George Street Shuffle",
        color: "from-amber-300 via-yellow-400 to-orange-500",
        textColor: "text-amber-100",
        image: "assets/icon_enfj.png",
        audioSrc: "https://incompetech.com/music/royalty-free/mp3-royaltyfree/George%20Street%20Shuffle.mp3", // Soul/Jazz
        coverPattern: "conic-gradient(from 0deg, transparent 0deg, rgba(255,255,255,0.1) 180deg, transparent 360deg)",
        animClass: "animate-pulse-slow",
        pros: [
            "사람들에게 영감과 동기를 부여하는 카리스마",
            "뛰어난 공감 능력과 타인을 이끄는 리더십",
            "언변이 뛰어나고 설득력이 좋음",
            "공동체의 이익과 화합을 위해 헌신함",
            "긍정적인 에너지로 주변을 변화시키는 힘"
        ],
        cons: [
            "타인의 문제에 지나치게 감정 이입하여 힘들어함",
            "비판을 개인적인 공격으로 받아들이고 예민함",
            "모든 사람을 만족시키려다 자신이 지침",
            "이상과 현실의 괴리에서 오는 큰 좌절감",
            "성급한 결정으로 세부 사항을 놓칠 수 있음"
        ]
    },
    "ENTJ": {
        genre: "EPIC ORCHESTRA",
        subTitle: "제국의 황제",
        desc: `당신은 스스로 운명을 개척하고 세상을 자신의 뜻대로 재편하는 제국의 황제이자 불멸의 전략가입니다.\n\n당신에게 만족이란 없습니다, 오직 성취만이 있을 뿐입니다. 심리학적으로 당신은 태어날 때부터 지휘봉을 쥐고 태어난 리더이며, 혼돈스러운 상황을 정리하고 효율적인 시스템을 구축하는 데 병적인 집착을 보입니다. 당신은 감정에 휘둘리는 것을 나약함으로 간주하며, 목표 달성을 위해서라면 자신조차 도구로 써버리는 냉혹한 결단력을 지녔습니다. 사람들은 당신의 압도적인 추진력을 두려워하면서도 경외합니다. 당신은 길을 찾는 사람이 아니라, 길이 없으면 길을 만드는 사람입니다.\n\n전장을 울리는 웅장한 북소리, 비장한 현악기 선율, 압도적인 스케일의 에픽 오케스트라 음악만이 당신의 거대한 야망을 담을 수 있습니다. 평범하고 잔잔한 음악은 당신의 끓어오르는 정복욕을 감당하지 못합니다.\n\n당신에게 음악은 대관식의 배경음악입니다. 웅장하게 고조되는 클라이맥스를 들으며 당신은 자신이 이룩할 거대한 제국을 상상합니다. 이 음악은 당신에게 명령합니다. "일어나라, 그리고 증명하라. 네가 바로 이 세상의 주인임을." 당신의 심장 박동은 이미 승리의 팡파르와 함께 뛰고 있습니다.`,
        bestSong: "Heroic Age",
        color: "from-red-700 via-red-900 to-black",
        textColor: "text-red-300",
        image: "assets/icon_entj.png",
        audioSrc: "https://incompetech.com/music/royalty-free/mp3-royaltyfree/Heroic%20Age.mp3", // Epic
        coverPattern: "repeating-linear-gradient(to bottom, transparent, transparent 5px, rgba(255,255,255,0.1) 5px, rgba(255,255,255,0.1) 10px)",
        animClass: "animate-spin-slow",
        pros: [
            "장기적인 안목과 전략적 계획 수립 능력",
            "강력한 추진력으로 목표를 반드시 달성함",
            "비효율적인 시스템을 과감하게 개선하는 혁신성",
            "어려운 결정도 냉철하게 내리는 결단력",
            "지적 능력에 대한 자신감과 카리스마"
        ],
        cons: [
            "자신의 기준을 타인에게 강요하여 압박줌",
            "감정적인 배려가 부족해 차갑다다는 평가를 받음",
            "자신의 실수나 실패를 인정하기 어려워함",
            "일 중독으로 인해 건강과 인간관계를 소홀히 함",
            "타인의 능력을 무시하거나 오만해 보일 수 있음"
        ]
    }
};

</script>
    <script>
// ==========================================
// [2] 로직 및 상태 관리
// ==========================================

let currentState = 'intro'; // intro, test, loading, result, allTypes
let currentQIndex = 0;
let scores = { E: 0, I: 0, S: 0, N: 0, F: 0, T: 0, J: 0, P: 0 };
let finalResult = null;
let isTransitioning = false; // 광클 방지용
let isPlaying = false;
let audioPlayer = new Audio();
audioPlayer.loop = true;
audioPlayer.volume = 0.5;
audioPlayer.preload = 'auto'; // 빠른 재생을 위한 설정

const appContainer = document.getElementById('app-container');

// 초기화
function init() {
    renderScreen('intro');
}

// 인트로 화면으로 돌아가기 (되돌아가기 버튼 기능)
function goToIntro() {
    resetTest();
}

function resetTest() {
    scores = { E: 0, I: 0, S: 0, N: 0, F: 0, T: 0, J: 0, P: 0 };
    currentQIndex = 0;
    isTransitioning = false;
    stopAudio();
    renderScreen('intro');
}

// 화면 렌더링 라우터
function renderScreen(state) {
    currentState = state;
    appContainer.innerHTML = ''; // 기존 내용 삭제
    stopAudio(); // 화면 전환 시 오디오 정지

    switch (state) {
        case 'intro':
            renderIntro();
            break;
        case 'test':
            renderTest();
            break;
        case 'loading':
            renderLoading();
            break;
        case 'result':
            renderResult();
            break;
        case 'allTypes':
            renderAllTypes();
            break;
    }
    // 아이콘 리렌더링
    if (window.lucide) {
        lucide.createIcons();
    }
}

// [Intro] 화면
function renderIntro() {
    appContainer.innerHTML = `
        <div class="flex flex-col items-center justify-center h-full px-6 text-center relative overflow-hidden bg-[#09090b]">
            <!-- K/DA Style Background: Deep Violet + Gold/Neon Accents -->
            <div class="absolute inset-0 bg-[radial-gradient(circle_at_50%_30%,_rgba(76,29,149,0.4)_0%,_rgba(0,0,0,1)_70%)] animate-pulse-slow"></div>
            
            <!-- Neon Orbs -->
            <div class="absolute top-[-10%] right-[-10%] w-[50%] h-[50%] bg-[radial-gradient(circle,_rgba(139,92,246,0.3)_0%,_transparent_70%)] blur-[80px] animate-float"></div>
            <div class="absolute bottom-[-10%] left-[-10%] w-[50%] h-[50%] bg-[radial-gradient(circle,_rgba(234,179,8,0.2)_0%,_transparent_70%)] blur-[80px] animate-float" style="animation-delay: -2s;"></div>

            <!-- Holographic HUD Rings -->
            <div class="absolute inset-0 flex items-center justify-center pointer-events-none">
                <div class="w-[80vw] h-[80vw] md:w-[600px] md:h-[600px] border border-white/5 rounded-full animate-spin-slower"></div>
                <div class="w-[70vw] h-[70vw] md:w-[500px] md:h-[500px] border border-purple-500/20 rounded-full animate-reverse-spin"></div>
            </div>

            <!-- Content Container -->
            <div class="relative z-10 flex flex-col items-center w-full max-w-md animate-fade-in-up">
                
                <!-- HUD Badge -->
                <div class="relative group mb-10">
                    <div class="absolute -inset-1 bg-gradient-to-r from-purple-600 to-amber-400 rounded-lg blur opacity-25 group-hover:opacity-75 transition duration-1000 group-hover:duration-200"></div>
                    <div class="relative px-6 py-2 bg-black/50 ring-1 ring-white/10 rounded-lg backdrop-blur-xl flex items-center gap-3">
                        <span class="flex h-2 w-2 relative">
                            <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-amber-400 opacity-75"></span>
                            <span class="relative inline-flex rounded-full h-2 w-2 bg-amber-500"></span>
                        </span>
                        <span class="text-amber-100/90 text-[11px] font-bold tracking-[0.2em] font-display">음악 성격 유형 분석</span>
                    </div>
                </div>
                
                <!-- K/DA Style Title (Korean) -->
                <!-- K/DA Style Title (Korean) -->
                <div class="px-2 w-full text-center max-w-full break-keep relative z-20">
                    <h1 class="text-4xl md:text-5xl font-black text-transparent bg-clip-text bg-gradient-to-b from-white via-white to-gray-400 mb-2 tracking-tighter drop-shadow-[0_0_30px_rgba(255,255,255,0.2)] font-display italic leading-tight" style="text-shadow: 0 0 20px rgba(139,92,246,0.5);">
                        내 성격과 싱크로율 100%
                    </h1>
                    <h1 class="text-5xl md:text-7xl font-black text-transparent bg-clip-text bg-gradient-to-r from-purple-400 via-fuchsia-400 to-amber-300 mb-8 tracking-tighter animate-gradient-x font-display italic leading-tight" style="filter: drop-shadow(0 0 10px rgba(168,85,247,0.4));">
                        나의 음악 성격 찾기
                    </h1>
                </div>
                
                <!-- Description (MZ Style) -->
                <p class="text-gray-400 text-sm md:text-base mb-12 font-medium tracking-wide leading-relaxed break-keep">
                    나의 진짜 성격에 딱 맞는<br>
                    <span class="text-amber-300 font-bold drop-shadow-glow">음악을 매칭해보세요</span> 👻<br>
                    <span class="text-xs opacity-70 mt-2 block font-mono">#취향저격 #성격분석 #바이브체크</span>
                </p>

                <!-- Primary Button (K/DA Gold/Purple) -->
                <button onclick="renderScreen('test')" class="group relative w-full h-16 bg-gray-900 rounded-xl transition-all duration-300 hover:scale-[1.02] hover:shadow-[0_0_30px_rgba(168,85,247,0.5)] overflow-hidden mb-4 border border-purple-500/30">
                    <div class="absolute inset-0 bg-gradient-to-r from-purple-600/20 to-amber-600/20 opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
                    <div class="absolute bottom-0 left-0 h-[2px] w-full bg-gradient-to-r from-purple-500 via-amber-400 to-purple-500"></div>
                    <span class="relative flex items-center justify-center gap-3 text-white font-bold text-lg tracking-widest w-full h-full">
                        <i data-lucide="play" class="w-5 h-5 fill-amber-400 text-amber-400"></i>
                        나의 바이브 확인하기
                    </span>
                </button>
                
                <!-- Secondary Button (Card Style) -->
                 <button onclick="renderScreen('allTypes')" class="group w-full h-14 bg-white/5 hover:bg-white/10 rounded-xl transition-all duration-300 border border-white/10 hover:border-white/30 flex items-center justify-center gap-2 backdrop-blur-md">
                    <i data-lucide="layout-grid" class="w-4 h-4 text-gray-400 group-hover:text-white transition-colors"></i>
                    <span class="text-gray-400 text-xs font-bold tracking-widest group-hover:text-white transition-colors">전체 유형 카드 보기</span>
                </button>
            </div>
            
            <!-- Footer Removed as per request -->
        </div>
    `;
    lucide.createIcons();
}

// [Quiz] 화면
function renderTest() {
    const q = QUESTIONS[currentQIndex];
    if (!q) return; // 방어 코드

    const progress = ((currentQIndex + 1) / QUESTIONS.length) * 100;

    const contentHTML = `
        <div id="quiz-content" class="flex flex-col h-full px-6 py-4 opacity-0 transition-opacity duration-300 overflow-y-auto hide-scrollbar">
            <div class="w-full bg-gray-800/50 h-1.5 rounded-full mb-6 overflow-hidden shrink-0 border border-white/5">
                <div class="bg-gradient-to-r from-purple-600 to-amber-400 h-full transition-all duration-500 ease-out shadow-[0_0_10px_rgba(245,158,11,0.5)]" style="width: ${progress}%"></div>
            </div>
            <div class="flex-1 flex flex-col justify-center pb-6">
                <div class="flex justify-between items-center mb-3">
                    <span class="text-purple-400 font-bold tracking-widest text-sm block">
                        Q. ${currentQIndex + 1 < 10 ? '0' + (currentQIndex + 1) : currentQIndex + 1}
                    </span>
                    <span class="text-gray-500 text-xs font-mono">${currentQIndex + 1} / ${QUESTIONS.length}</span>
                </div>
                <h2 class="text-xl md:text-2xl font-bold text-white mb-8 leading-snug break-keep">
                    ${q.text}
                </h2>
                
                <div class="flex flex-col gap-3">
                    ${q.options.map((opt, idx) => `
                        <button 
                            onclick="handleAnswer('${opt.type}', ${opt.score})" 
                            class="w-full p-4 text-left bg-black/40 backdrop-blur-md border border-white/10 rounded-xl hover:bg-black/60 hover:border-amber-500/50 hover:shadow-[0_0_15px_rgba(245,158,11,0.2)] hover:translate-x-1 transition-all duration-200 group option-btn"
                        >
                            <span class="text-gray-300 group-hover:text-amber-100 text-sm md:text-base font-medium break-keep leading-relaxed flex justify-between items-center">
                                ${opt.text}
                                <i data-lucide="chevron-right" class="w-4 h-4 text-gray-600 group-hover:text-amber-500 transition-colors"></i>
                            </span>
                        </button>
                    `).join('')}
                </div>
            </div>
        </div>
    `;

    appContainer.innerHTML = contentHTML;

    // 페이드인 효과
    setTimeout(() => {
        const el = document.getElementById('quiz-content');
        if (el) {
            el.classList.remove('opacity-0');
            if (window.lucide) lucide.createIcons();
        }
    }, 50);
}

// 답변 처리 (광클 방지 포함)
function handleAnswer(type, score) {
    if (isTransitioning) return;
    isTransitioning = true;

    // 버튼 비활성화 시각 효과
    const btns = document.querySelectorAll('.option-btn');
    btns.forEach(b => {
        b.classList.add('cursor-not-allowed', 'opacity-70');
        b.disabled = true;
    });

    // 점수 반영
    scores[type] = (scores[type] || 0) + score;

    // 페이드아웃 및 다음 질문
    const content = document.getElementById('quiz-content');
    // content가 존재하고 opacity-0 클래스가 없으면 페이드 아웃
    if (content && !content.classList.contains('opacity-0')) {
        content.style.opacity = '0';
    }

    setTimeout(() => {
        if (currentQIndex < QUESTIONS.length - 1) {
            currentQIndex++;
            renderTest();
        } else {
            calculateResult();
        }
        isTransitioning = false;
    }, 300);
}

// [Loading] 화면 및 결과 계산
function renderLoading() {
    appContainer.innerHTML = `
        <div class="flex flex-col items-center justify-center h-full text-center px-6">
            <div class="flex items-end gap-1 mb-8 h-16">
                <div class="w-3 bg-gradient-to-t from-purple-600 to-amber-400 rounded-full animate-music-bar shadow-[0_0_10px_rgba(168,85,247,0.5)]" style="animation-delay: 0s;"></div>
                <div class="w-3 bg-gradient-to-t from-purple-600 to-amber-400 rounded-full animate-music-bar shadow-[0_0_10px_rgba(168,85,247,0.5)]" style="animation-delay: 0.1s;"></div>
                <div class="w-3 bg-gradient-to-t from-purple-600 to-amber-400 rounded-full animate-music-bar shadow-[0_0_10px_rgba(168,85,247,0.5)]" style="animation-delay: 0.2s;"></div>
                <div class="w-3 bg-gradient-to-t from-purple-600 to-amber-400 rounded-full animate-music-bar shadow-[0_0_10px_rgba(168,85,247,0.5)]" style="animation-delay: 0.3s;"></div>
                <div class="w-3 bg-gradient-to-t from-purple-600 to-amber-400 rounded-full animate-music-bar shadow-[0_0_10px_rgba(168,85,247,0.5)]" style="animation-delay: 0.4s;"></div>
            </div>
            <h3 class="text-2xl font-bold text-white mb-2">분석 중...</h3>
            <p class="text-gray-400">당신의 성격 DNA를 음악적 주파수로 매칭하고 있습니다.</p>
        </div>
    `;
}

function calculateResult() {
    renderScreen('loading');

    setTimeout(() => {
        const eType = scores.E >= scores.I ? 'E' : 'I';
        const sType = scores.S >= scores.N ? 'S' : 'N';
        const fType = scores.F >= scores.T ? 'F' : 'T';
        const jType = scores.J >= scores.P ? 'J' : 'P';

        const mbti = eType + sType + fType + jType;

        // Fallback (mbti가 없을 경우 ENFP를 사용)
        const finalMbti = RESULTS_DATA[mbti] ? mbti : "ENFP";

        finalResult = { ...RESULTS_DATA[finalMbti], mbti: finalMbti };

        renderScreen('result');
    }, 2500);
}

// 특정 MBTI를 선택하여 결과 화면을 보여주는 함수
function selectTypeAndShowResult(mbtiKey) {
    // scores 초기화 (테스트를 거치지 않으므로)
    scores = { E: 0, I: 0, S: 0, N: 0, F: 0, T: 0, J: 0, P: 0 };
    currentQIndex = QUESTIONS.length; // 퀴즈 완료 상태로 설정

    // 결과 데이터 설정
    const finalMbti = RESULTS_DATA[mbtiKey] ? mbtiKey : "ENFP";
    finalResult = { ...RESULTS_DATA[finalMbti], mbti: finalMbti };

    renderScreen('result');
}

// [Result] 화면
function renderResult() {
    // 오디오 설정
    if (audioPlayer.src !== finalResult.audioSrc) {
        audioPlayer.src = finalResult.audioSrc;
    }
    // isPlaying = false; // 자동재생을 위해 제거 (renderScreen에서 이미 stopAudio 호출됨)

    // 장단점 리스트 HTML 생성
    const prosList = finalResult.pros.map(p => `<li class="flex items-start gap-2"><i data-lucide="check-circle" class="w-4 h-4 text-green-400 mt-0.5 shrink-0"></i><span class="text-gray-300 text-sm">${p}</span></li>`).join('');
    const consList = finalResult.cons.map(c => `<li class="flex items-start gap-2"><i data-lucide="x-octagon" class="w-4 h-4 text-red-400 mt-0.5 shrink-0"></i><span class="text-gray-300 text-sm">${c}</span></li>`).join('');

    // **[스크롤 최종 해결]** h-full, overflow-y-auto, flex-col, flex-grow, min-h-0 클래스를 모두 적용하여 스크롤 영역을 명확히 지정합니다.
    appContainer.innerHTML = `
        <div class="h-full overflow-y-auto hide-scrollbar flex flex-col flex-grow min-h-0 relative"> 
            
            <!-- K/DA Result Background Overlay (To match Intro intensity) -->
            <div class="absolute inset-0 bg-[radial-gradient(circle_at_50%_0%,_rgba(76,29,149,0.3)_0%,_transparent_70%)] pointer-events-none z-0"></div>
            <div class="absolute top-[-20%] right-[-20%] w-[60%] h-[60%] bg-purple-900/40 rounded-full blur-[100px] pointer-events-none z-0"></div>
            <div class="absolute bottom-[-10%] left-[-10%] w-[50%] h-[50%] bg-amber-600/20 rounded-full blur-[100px] pointer-events-none z-0"></div>

            <div class="px-6 py-8 flex flex-col items-center text-center animate-slide-up pb-20 relative z-10">
                
                <div class="w-full max-w-sm bg-gray-900 border border-gray-700 p-6 rounded-[2rem] shadow-2xl relative overflow-hidden mb-6 group select-none transition-all">
                    <div id="card-bg" class="absolute inset-0 bg-gradient-to-br ${finalResult.color} opacity-20 transition-opacity duration-1000"></div>
                    
                    <div class="flex justify-between items-center text-gray-400 text-[10px] font-mono mb-6 opacity-70 relative z-10">
                        <span>VIBE: ${finalResult.genre}</span>
                        <div class="flex gap-1 items-center">
                            <span>VIBE MATCH</span>
                            <div id="rec-dot" class="w-2 h-2 rounded-full bg-red-500"></div>
                        </div>
                    </div>

                    <!-- Clean LP Design (Standalone) -->
                    <div class="relative w-64 h-64 mx-auto mb-8 flex items-center justify-center">
                        <!-- Glow -->
                        <div id="lp-glow" class="absolute inset-0 rounded-full bg-gradient-to-br ${finalResult.color} blur-2xl opacity-40 transition-all duration-1000 scale-100"></div>
                        
                        <!-- LP Disk -->
                        <div id="lp-disk" class="w-60 h-60 rounded-full bg-[#1a1a1a] shadow-2xl relative overflow-hidden flex items-center justify-center border border-gray-800 transition-all duration-300">
                            <!-- Vinyl Grooves -->
                            <div class="absolute inset-0 rounded-full bg-[repeating-radial-gradient(circle,#1a1a1a_0,#1a1a1a_2px,#222_3px,#222_4px)] opacity-90"></div>
                            
                            <!-- Shine -->
                            <div class="absolute inset-0 rounded-full bg-gradient-to-tr from-transparent via-white/10 to-transparent pointer-events-none z-10"></div>
                            
                            <!-- Center Label -->
                            <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[55%] h-[55%] rounded-full overflow-hidden z-20 shadow-[0_0_10px_rgba(0,0,0,0.5)] border-4 border-[#151515]">
                                <img src="${finalResult.image}" alt="${finalResult.genre}" class="w-full h-full object-cover">
                            </div>

                            <!-- Hole -->
                            <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-3 h-3 rounded-full bg-[#0a0a0a] z-30 shadow-inner border border-gray-700"></div>
                        </div>
                    </div>

                    <div class="relative z-10 text-left px-2">
                        <div class="inline-block px-3 py-1 bg-purple-500/20 rounded-full mb-3 border border-purple-500/30 backdrop-blur-md">
                            <span class="text-[11px] font-bold text-purple-300 tracking-widest drop-shadow-sm">MY VIBE RESULT</span>
                        </div>
                        <h2 class="text-4xl md:text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-white via-purple-100 to-gray-400 mb-2 leading-none tracking-tighter shadow-xl">
                            ${finalResult.genre}
                        </h2>
                        <p class="text-sm font-medium text-gray-400 mb-6 tracking-wide flex items-center gap-2">
                            <span class="w-1.5 h-1.5 rounded-full bg-purple-500"></span>
                            ${finalResult.subTitle}
                        </p>

                        <div onclick="toggleAudio()" 
                                id="player-btn"
                                class="group cursor-pointer rounded-2xl p-1 mb-6 backdrop-blur-md bg-white/5 border border-white/10 flex items-center gap-2 transition-all duration-300 hover:bg-white/10 hover:border-purple-500/30 hover:shadow-[0_0_20px_rgba(168,85,247,0.2)]">
                                
                                <div class="w-12 h-12 rounded-xl bg-gradient-to-br ${finalResult.color} flex items-center justify-center shrink-0 shadow-lg relative overflow-hidden group-hover:scale-95 transition-transform duration-300">
                                    <div id="play-icon-wrapper">
                                        <i data-lucide="play" class="w-5 h-5 text-white fill-white ml-0.5 group-hover:scale-110 transition-transform"></i>
                                    </div>
                                    <div class="absolute inset-0 bg-black/20 hidden group-hover:block transition-all"></div>
                                </div>
                                
                                <div class="flex-1 min-w-0 pr-4">
                                    <div class="flex items-center gap-2 mb-0.5">
                                        <span id="player-status" class="text-purple-400 text-[10px] font-bold uppercase tracking-widest">트랙 미리듣기</span>
                                        <span class="w-1 h-1 rounded-full bg-purple-500 animate-pulse"></span>
                                    </div>
                                    <div class="text-gray-200 text-sm font-bold truncate group-hover:text-white transition-colors" id="song-title">
                                        ${finalResult.bestSong}
                                    </div>
                                </div>

                                <div class="w-10 h-10 rounded-full flex items-center justify-center text-gray-400 group-hover:text-purple-400 transition-colors">
                                    <i data-lucide="bar-chart-2" class="w-5 h-5"></i>
                                </div>
                        </div>

                        <h3 class="flex items-center gap-2 text-lg font-bold text-white mt-8 mb-4 pb-2 border-b border-white/10">
                            <i data-lucide="sparkles" class="w-5 h-5 text-amber-400"></i>
                            <span class="text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-amber-300">심층 분석 리포트</span>
                        </h3>
                        
                        <div class="mb-8">
                            ${finalResult.desc.split('\n').filter(line => line.trim() !== '').map(paragraph =>
        `<p class="text-gray-200 text-[1.05rem] leading-relaxed mb-4 text-left font-normal break-keep opacity-90">${paragraph}</p>`
    ).join('')}
                        </div>

                        <div class="grid grid-cols-1 gap-6">
                            <div>
                                <h4 class="flex items-center gap-2 text-md font-extrabold text-green-400 mb-3"><i data-lucide="thumbs-up" class="w-5 h-5"></i> 핵심 강점</h4>
                                <ul class="space-y-2 list-none p-0">
                                    ${finalResult.pros.map(p => `<li class="flex items-start gap-2"><i data-lucide="check-circle" class="w-4 h-4 text-green-400 mt-0.5 shrink-0"></i><span class="text-gray-300 text-[13px] leading-snug break-keep">${p}</span></li>`).join('')}
                                </ul>
                            </div>
                            <div>
                                <h4 class="flex items-center gap-2 text-md font-extrabold text-red-400 mb-3"><i data-lucide="thumbs-down" class="w-5 h-5"></i> 주의할 점</h4>
                                <ul class="space-y-2 list-none p-0">
                                    ${finalResult.cons.map(c => `<li class="flex items-start gap-2"><i data-lucide="x-octagon" class="w-4 h-4 text-red-400 mt-0.5 shrink-0"></i><span class="text-gray-300 text-[13px] leading-snug break-keep">${c}</span></li>`).join('')}
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="flex flex-col gap-3 w-full max-w-sm">
                    <button onclick="alert('이미지 저장 기능은 html2canvas 라이브러리가 필요합니다.')" class="group w-full py-4 bg-gradient-to-r ${finalResult.color} rounded-xl text-white font-bold hover:brightness-110 transition-all shadow-lg flex items-center justify-center gap-2 relative overflow-hidden">
                        <div class="absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300"></div>
                        <i data-lucide="download" class="w-4 h-4 relative z-10"></i> <span class="relative z-10">이미지 저장하기</span>
                    </button>
                    
                    <div class="flex gap-3">
                        <button onclick="goToIntro()" class="flex-1 py-3 bg-black/40 backdrop-blur-md border border-white/10 rounded-xl text-gray-300 font-medium hover:bg-white/10 hover:border-amber-500/50 hover:text-white transition-all flex items-center justify-center gap-2 text-xs md:text-sm group shadow-lg">
                            <i data-lucide="home" class="w-4 h-4 group-hover:scale-110 transition-transform"></i> 메인으로
                        </button>
                        <button onclick="resetTest()" class="flex-1 py-3 bg-black/40 backdrop-blur-md border border-white/10 rounded-xl text-gray-300 font-medium hover:bg-white/10 hover:border-amber-500/50 hover:text-white transition-all flex items-center justify-center gap-2 text-xs md:text-sm group shadow-lg">
                            <i data-lucide="refresh-cw" class="w-4 h-4 group-hover:rotate-180 transition-transform duration-500"></i> 다시하기
                        </button>
                    </div>
                    <div class="grid grid-cols-2 gap-3 mt-1">
                        <button onclick="renderScreen('allTypes')" class="py-3 bg-black/40 backdrop-blur-md border border-white/10 rounded-xl text-gray-300 font-medium hover:bg-white/10 hover:border-amber-500/50 hover:text-white transition-all flex items-center justify-center gap-2 text-xs md:text-sm group shadow-lg">
                            <i data-lucide="list-music" class="w-4 h-4 group-hover:scale-110 transition-transform"></i> 전체 유형
                        </button>
                        <button onclick="shareResult()" class="py-3 bg-black/40 backdrop-blur-md border border-white/10 rounded-xl text-gray-300 font-medium hover:bg-white/10 hover:border-amber-500/50 hover:text-white transition-all flex items-center justify-center gap-2 text-xs md:text-sm group shadow-lg">
                            <i data-lucide="share-2" class="w-4 h-4 group-hover:scale-110 transition-transform"></i> 공유하기
                        </button>
                    </div>

                    <!-- 면책 조항 (Disclaimer) -->
                    <div class="mt-8 text-center px-4">
                        <p class="text-[10px] text-gray-600 leading-tight">
                            본 테스트는 오락 목적으로 제작되었으며, 공식 MBTI® 검사와는 무관합니다.<br>
                            This test is for entertainment purposes only and is not affiliated with the official MBTI® assessment.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    `;
    lucide.createIcons();

    // 결과 화면 진입 시 자동 재생
    setTimeout(() => {
        toggleAudio();
    }, 100);
}

// 오디오 토글 로직 & UI 업데이트
function toggleAudio() {
    isPlaying = !isPlaying;

    const cardBg = document.getElementById('card-bg');
    const recDot = document.getElementById('rec-dot');
    const lpDisk = document.getElementById('lp-disk');
    const lpGlow = document.getElementById('lp-glow'); // 추가
    const playerBtn = document.getElementById('player-btn');
    const playIconWrapper = document.getElementById('play-icon-wrapper');
    const playerStatus = document.getElementById('player-status');
    const songTitle = document.getElementById('song-title');
    const miniControlIcon = document.getElementById('mini-control-icon');

    if (isPlaying) {
        audioPlayer.play().catch(e => { console.log("Auto-play prevented", e); isPlaying = false; });

        // UI: Playing State
        cardBg.classList.replace('opacity-20', 'opacity-40');
        recDot.classList.add('animate-ping');

        // **LP Animation Logic**
        lpDisk.classList.add('animate-spin-slow');
        if (lpGlow) lpGlow.classList.add('scale-110', 'opacity-60'); // Glow effect enhancement

        // Player Style
        playerBtn.classList.replace('bg-gray-800/60', 'bg-white/10');
        playerBtn.classList.add('border-white/20', 'shadow-[0_0_15px_rgba(255,255,255,0.1)]');
        playerBtn.classList.add('scale-[1.02]');

        // Icons & Text
        playIconWrapper.innerHTML = `
            <div class="flex gap-0.5 items-end h-4 pb-1">
                <div class="w-1 bg-white animate-music-bar" style="animation-duration:0.4s"></div>
                <div class="w-1 bg-white animate-music-bar" style="animation-duration:0.6s"></div>
                <div class="w-1 bg-white animate-music-bar" style="animation-duration:0.5s"></div>
            </div>`;
        playerStatus.innerText = "NOW PLAYING";
        // 텍스트 컬러 클래스 추가 (split(' ')[0]를 사용하여 첫 번째 클래스만 적용)
        songTitle.classList.add(finalResult.textColor.split(' ')[0]);

        miniControlIcon.setAttribute('data-lucide', 'pause');
        miniControlIcon.classList.remove('ml-0.5');

    } else {
        audioPlayer.pause();

        // UI: Paused State
        if (cardBg.classList.contains('opacity-40')) {
            cardBg.classList.replace('opacity-40', 'opacity-20');
        }
        recDot.classList.remove('animate-ping');

        // **LP Animation Logic**
        lpDisk.classList.remove('animate-spin-slow');
        if (lpGlow) lpGlow.classList.remove('scale-110', 'opacity-60');

        // Player Style
        playerBtn.classList.replace('bg-white/10', 'bg-gray-800/60');
        playerBtn.classList.remove('border-white/20', 'shadow-[0_0_15px_rgba(255,255,255,0.1)]');
        playerBtn.classList.remove('scale-[1.02]');

        // Icons & Text
        playIconWrapper.innerHTML = `<i data-lucide="play" class="w-4 h-4 text-white fill-white ml-0.5"></i>`;
        playerStatus.innerText = "PREVIEW TRACK";
        songTitle.classList.remove(finalResult.textColor.split(' ')[0]);

        miniControlIcon.setAttribute('data-lucide', 'play');
        miniControlIcon.classList.add('ml-0.5');
    }
    lucide.createIcons();
}

function stopAudio() {
    audioPlayer.pause();
    audioPlayer.currentTime = 0;
    isPlaying = false;
}

// [All Types] 전체 유형 보기
function renderAllTypes() {
    const typesHTML = Object.entries(RESULTS_DATA).map(([key, data]) => `
        <div onclick="selectTypeAndShowResult('${key}')" class="group relative overflow-hidden bg-black/40 backdrop-blur-md border border-white/10 rounded-xl p-4 flex items-center gap-4 transition-all duration-300 hover:bg-black/60 hover:border-amber-500/50 hover:shadow-[0_0_20px_rgba(245,158,11,0.2)] cursor-pointer">
            <!-- Hover Gradient Effect -->
            <div class="absolute inset-0 bg-gradient-to-r from-purple-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
            
            <!-- Type Icon/Badge -->
            <div class="relative w-12 h-12 rounded-lg bg-gradient-to-br ${data.color} flex items-center justify-center shrink-0 shadow-lg group-hover:scale-105 transition-transform duration-300 border border-white/10">
                 <img src="${data.image}" alt="${data.genre}" class="w-full h-full object-cover opacity-90 group-hover:opacity-100 transition-opacity">
            </div>

            <!-- Content -->
            <div class="flex-1 relative z-10 min-w-0">
                <div class="flex items-center gap-2 mb-1">
                    <span class="text-[10px] font-black text-amber-500 tracking-widest uppercase bg-amber-500/10 px-1.5 py-0.5 rounded border border-amber-500/20 group-hover:bg-amber-500 group-hover:text-black transition-colors duration-300">${key}</span>
                </div>
                <div class="font-bold text-white text-sm mb-0.5 truncate group-hover:text-amber-200 transition-colors">${data.genre}</div>
                <div class="text-[10px] text-gray-400 line-clamp-1 group-hover:text-gray-300">${data.subTitle}</div>
            </div>
            
            <!-- Arrow Icon -->
            <i data-lucide="chevron-right" class="w-4 h-4 text-gray-600 group-hover:text-amber-500 transition-colors transform group-hover:translate-x-1"></i>
        </div>
    `).join('');

    appContainer.innerHTML = `
        <div class="h-full overflow-y-auto hide-scrollbar relative z-20 animate-fade-in">
             <!-- K/DA Background for All Types (Consistent with Intro) -->
             <div class="sticky top-0 z-30 bg-gradient-to-b from-[#09090b] via-[#09090b]/95 to-transparent pb-4 px-6 pt-2 backdrop-blur-sm">
                <div class="flex items-center gap-4 py-2">
                    <button onclick="goToIntro()" class="p-2 bg-white/5 border border-white/10 rounded-full text-gray-400 hover:text-white hover:bg-white/10 hover:border-amber-500/50 transition-all group">
                        <i data-lucide="arrow-left" class="w-5 h-5 group-hover:scale-110 transition-transform"></i>
                    </button>
                    <h2 class="text-2xl font-black text-transparent bg-clip-text bg-gradient-to-r from-white to-gray-400 italic tracking-tighter">ALL TYPES</h2>
                </div>
             </div>

             <div class="px-6 pb-24 grid gap-3">
                 ${typesHTML}
             </div>
        </div>
    `;
    lucide.createIcons();
}

// 결과 공유하기
function shareResult() {
    const mbtiResult = calculateMBTI();
    const resultData = RESULTS_DATA[mbtiResult];

    const shareData = {
        title: 'MY MUSIC VIBE TEST',
        text: `나의 음악 성향: ${resultData.subTitle}\n추천 장르: ${resultData.genre}\n\n당신의 음악적 바이브를 확인해보세요!`,
        url: window.location.href
    };

    if (navigator.share) {
        navigator.share(shareData)
            .then(() => console.log('Shared successfully'))
            .catch((error) => console.log('Error sharing', error));
    } else {
        const textToCopy = `${shareData.title}\n${shareData.text}\n테스트 하러가기: ${shareData.url}`;
        navigator.clipboard.writeText(textToCopy).then(() => {
            alert('결과가 클립보드에 복사되었습니다! 친구들에게 공유해보세요.');
        }).catch(err => {
            alert('이 브라우저에서는 공유하기를 지원하지 않습니다.');
        });
    }
}

// 앱 시작
init();

</script>

<script>
// CodePen Fallback: If local images fail to load, hide them to show the beautiful gradient background
document.addEventListener('error', function(e) {
    if (e.target.tagName === 'IMG') {
        e.target.style.display = 'none';
        // Optional: Add a text fallback or icon if needed, but gradient is fine for K/DA style
    }
}, true);
</script>

</body>

</html>